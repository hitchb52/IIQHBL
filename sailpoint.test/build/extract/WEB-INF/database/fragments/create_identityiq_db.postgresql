--
-- This script is a SAMPLE and can be modified as appropriate by the
-- customer as long as the equivalent tables and indexes are created.
-- The database name, user, and password must match those defined in
-- iiq.properties in the IdentityIQ installation.
--  

CREATE USER identityiq WITH ENCRYPTED PASSWORD 'identityiq';
-- It's possible that AWS RDS Postgres has an issue with double-quoted DB usernames that match their respective
-- passwords verbatim. Changing the password to something that doesn't match the username should resolve the issue.
CREATE USER "identityiqPlugin" WITH ENCRYPTED PASSWORD 'identityiqPlugin';

-- Note that we do not specify a LC_COLLATE - use default value from each PostgreSQL release.
-- IdentityIQ requires a case-insensitive collation.
CREATE DATABASE identityiq ENCODING utf8;
ALTER DATABASE identityiq OWNER TO identityiq;
\connect identityiq identityiq;
CREATE SCHEMA identityiq AUTHORIZATION identityiq;
